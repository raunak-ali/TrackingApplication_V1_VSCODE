

<!-- Header -->
<div class="header">
  <h2>Dashboard <img src="/assets/Mentor_Dashboard_Icon.png" alt="Mentor Dashboard Icon" class="icon"></h2>
  <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu" class="menu-button">
    <mat-icon>menu</mat-icon>
  </button>
  <mat-menu #menu="matMenu" class="custom-menu">
    <button mat-menu-item (click)="navigateTo('dashboard')">Dashboard</button>
    <button mat-menu-item (click)="navigateTo('batches')">Batches</button>
    <button mat-menu-item (click)="navigateTo('profile')">Profile</button>
    <button mat-menu-item (click)="navigateTo('employees')">Employees</button>
    <button mat-menu-item (click)="logout()">Logout</button>
  </mat-menu>
</div>

<!-- Main Content -->
<div class="content">
  <!-- Task Container -->
  <div class="task-container">
    <div  class="task-container">
      <button *ngIf="currentUser.Role!=0" mat-raised-button (click)="showForm = !showForm" class="btn btn-primary">Add New Task</button>
      <!-- Add New Task Form -->
      <div *ngIf="showForm" class="form-card">
        <!-- Your Add New Task Form content -->
        <h2>Add New Task</h2>
        <form [formGroup]="AddNewTaskForm" (ngSubmit)="AddNewTask()" class="needs-validation" novalidate>
          <mat-form-field appearance="fill">
            <mat-label>Task Name</mat-label>
            <input matInput formControlName="TaskName" id="taskName" placeholder="TaskName"required>
            <mat-error *ngIf="AddNewTaskForm.get('TaskName')?.invalid">Task name is required.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Description</mat-label>
            <input matInput formControlName="Description" id="description" placeholder="Description of this task">
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Priority</mat-label>
            <mat-select formControlName="Priority" id="priority">
              <mat-option *ngFor="let priority of priorities" [value]="priority">{{ priority }}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Deadline</mat-label>
            <input matInput type="date" formControlName="DeadLine" id="deadLine" placeholder="DeadLine">
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Assigned To</mat-label>
            <mat-select formControlName="AssignedTo" multiple>
              <mat-option *ngFor="let employee of AllEmployyes" [value]="employee.userId">
                {{ employee.name }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="AddNewTaskForm.get('AssignedTo')?.invalid">At least one employee must be assigned.</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Comments</mat-label>
            <input matInput formControlName="Comments" id="comments" placeholder="Comments">
          </mat-form-field>
          <!-- Add other form fields as needed -->
          <button type="submit" mat-raised-button color="primary">Submit</button>
        </form>

      </div>

      <!-- Display Task List as Accordion -->
      <div *ngIf="AllTasks!=null; else noTransactions">
        <!-- Your Task List content -->
        <h2>All Tasks</h2>
        <mat-accordion>
          <mat-expansion-panel *ngFor="let task of AllTasks">
            <mat-expansion-panel-header>
              <mat-panel-title>{{ task.taskName }}</mat-panel-title>
            </mat-expansion-panel-header>
            <p>{{ task.description }}</p>
            <p>Deadline: {{ task.deadLine }}</p>
            <button class="btn btn-primary" (click)="viewBatch(task.userTaskID)">View SubTasks</button>
            <!-- Add more details and subtask link as needed -->
          </mat-expansion-panel>
        </mat-accordion>

      </div>
      <!-- Placeholder for no transactions -->
      <ng-template #noTransactions>
        <p>No Tasks have been added Yet.</p>
      </ng-template>
    </div>
  </div>

  <!-- Employee List -->
  <div class="employee-list">
    <h2>List of Employees</h2>
    <!-- Your Employee List content -->

      <table mat-table class="employee-table">
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let employee">{{ employee.name }}</td>
        </ng-container>

        <!-- Score Column -->
        <ng-container matColumnDef="score">
          <th mat-header-cell *matHeaderCellDef>Score</th>
          <td mat-cell *matCellDef="let employee">{{ employee.score }}</td>
        </ng-container>

        <tr mat-row *ngFor="let employee of AllEmployyes">
          <td mat-cell (click)="viewEmployee(employee.userId)">{{ employee.name }}</td>
          <td mat-cell>{{ employee.totalAverageRatingStatus }}</td>
        </tr>
      </table>

  </div>
</div>

<!-- Angular Material Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular/12.2.8/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-material/12.2.8/angular-material.min.js"></script>

